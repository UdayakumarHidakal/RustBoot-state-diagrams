<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="811px" preserveAspectRatio="none" style="width:1424px;height:811px;background:#FFFFFF;" version="1.1" viewBox="0 0 1424 811" width="1424px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="134" x="643.9688" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="124" x="648.9688" y="32.9951">Rust Boot Flow</text><path d="M500.5,47.2969 L500.5,55.8633 L480.5,59.8633 L500.5,63.8633 L500.5,72.4297 A0,0 0 0 0 500.5,72.4297 L674.5,72.4297 A0,0 0 0 0 674.5,72.4297 L674.5,57.2969 L664.5,47.2969 L500.5,47.2969 A0,0 0 0 0 500.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M664.5,47.2969 L664.5,57.2969 L674.5,57.2969 L664.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="506.5" y="64.3638">Power ON / Board Reset</text><ellipse cx="470.5" cy="59.8633" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="416" y="92.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="426" y="113.5684">Rust Boot Start</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="403.5" y="146.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="413.5" y="167.5371">Opens Partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93" x="417.5" y="181.5059">1. Boot Partition</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="417.5" y="195.4746">2. Update Partition</text><polygon fill="#F1F1F1" points="396,243.3047,545,243.3047,557,268.9141,545,294.5234,396,294.5234,384,268.9141,396,243.3047" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="396" y="253.5151">Check the trailer magic</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="400" y="266.3198">of Boot Partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="400" y="279.1245">If Boot partition is</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="400" y="291.9292">BootInTesting State 0x10</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="99" x="247" y="227.9058">True i.e. Updated</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="247" y="240.7104">firmware was not able</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="251" y="253.5151">to set the image state</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="251" y="266.3198">to success state 0x00</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="557" y="266.3198">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="226" x="11" y="304.5234"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="21" y="325.6621">Trigger the Updated</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="25" y="339.6309">set Image state to Updating state</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="21" y="387.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="35" y="408.5996">Roll back to the Boot firmware</text><polygon fill="#F1F1F1" points="747.0625,304.5234,915.0625,304.5234,927.0625,323.7305,915.0625,342.9375,747.0625,342.9375,735.0625,323.7305,747.0625,304.5234" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="164" x="747.0625" y="314.7339">Check if the Update partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="751.0625" y="327.5386">is in UpdateInUpdatingStage</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="747.0625" y="340.3433">0x70</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="709.0625" y="321.1362">True</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="927.0625" y="321.1362">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="507.6875" y="352.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="517.6875" y="374.0762">Call rust Boot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122" x="521.6875" y="388.0449">Open all 3 partitions</text><polygon fill="#F1F1F1" points="535.6875,435.875,631.6875,435.875,643.6875,461.4844,631.6875,487.0938,535.6875,487.0938,523.6875,461.4844,535.6875,435.875" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="535.6875" y="446.0854">Verify Integrty</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="535.6875" y="458.8901">and authenticity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="535.6875" y="471.6948">of Firmware in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="535.6875" y="484.4995">Update partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="497.6875" y="458.8901">True</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="643.6875" y="458.8901">False</text><polygon fill="#F1F1F1" points="407.9375,497.0938,570.9375,497.0938,582.9375,522.7031,570.9375,548.3125,407.9375,548.3125,395.9375,522.7031,407.9375,497.0938" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="407.9375" y="507.3042">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="411.9375" y="520.1089">if Update Firmware Version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="9" x="411.9375" y="532.9136">&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="411.9375" y="545.7183">Boot Firmware version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="369.9375" y="520.1089">True</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="309.4375" y="558.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="319.4375" y="579.4512">Swap the Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="323.4375" y="593.4199">partition with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="323.4375" y="607.3887">Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="323.4375" y="621.3574">set the update image</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="323.4375" y="635.3262">flag to Testing state</text><rect fill="#98FB98" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="226" x="272.9375" y="668.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="282.9375" y="689.2949">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="286.9375" y="703.2637">updated firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="286.9375" y="717.2324">validate the firmware functionality</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109" x="286.9375" y="731.2012">set the Image flag</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="286.9375" y="745.1699">to success state 0x00</text><ellipse cx="385.9375" cy="789" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="385.9375" cy="789" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF0000" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="565.4375" y="558.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="575.4375" y="579.4512">Panic!</text><rect fill="#FF0000" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="650.4375" y="497.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="660.4375" y="518.2324">Panic!</text><polygon fill="#F1F1F1" points="996.4375,352.9375,1160.4375,352.9375,1172.4375,372.1445,1160.4375,391.3516,996.4375,391.3516,984.4375,372.1445,996.4375,352.9375" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="996.4375" y="363.1479">Match Boot Partition type</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="136" x="1000.4375" y="375.9526">1. BootInNewState 0xFF</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="1000.4375" y="388.7573">2. BootInSuccessState 0x00</text><polygon fill="#F1F1F1" points="912.1875,452.5703,1024.1875,452.5703,1036.1875,471.7773,1024.1875,490.9844,912.1875,490.9844,900.1875,471.7773,912.1875,452.5703" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="108" x="912.1875" y="462.7808">Verify the Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="916.1875" y="475.5854">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="916.1875" y="488.3901">Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="874.1875" y="469.1831">True</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1036.1875" y="469.1831">False</text><rect fill="#98FB98" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="753.9375" y="500.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="763.9375" y="522.123">Jump to the Next firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="767.9375" y="536.0918">Boot firmware</text><rect fill="#98FB98" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="745.4375" y="583.9219"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="755.4375" y="605.0605">Trigger the updated</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="759.4375" y="619.0293">Set the Update Image state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139" x="759.4375" y="632.998">to Updating state 0x70</text><path d="M872.4375,665.8281 L872.4375,674.3945 L852.4375,678.3945 L872.4375,682.3945 L872.4375,690.9609 A0,0 0 0 0 872.4375,690.9609 L1046.4375,690.9609 A0,0 0 0 0 1046.4375,690.9609 L1046.4375,675.8281 L1036.4375,665.8281 L872.4375,665.8281 A0,0 0 0 0 872.4375,665.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1036.4375,665.8281 L1036.4375,675.8281 L1046.4375,675.8281 L1036.4375,665.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="878.4375" y="682.895">Power ON / Board Reset</text><ellipse cx="842.4375" cy="678.3945" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="836.2503" x2="848.6247" y1="672.2073" y2="684.5817"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="848.6247" x2="836.2503" y1="672.2073" y2="684.5817"/><rect fill="#FF0000" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1066.4375" y="500.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1076.4375" y="522.123">Panic!</text><polygon fill="#F1F1F1" points="1249.9375,452.5703,1361.9375,452.5703,1373.9375,471.7773,1361.9375,490.9844,1249.9375,490.9844,1237.9375,471.7773,1249.9375,452.5703" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="108" x="1249.9375" y="462.7808">Verify the Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="1253.9375" y="475.5854">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1253.9375" y="488.3901">Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="1211.9375" y="469.1831">True</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1373.9375" y="469.1831">False</text><rect fill="#98FB98" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="1161.4375" y="500.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1171.4375" y="522.123">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109" x="1175.4375" y="536.0918">Updated firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="1175.4375" y="550.0605">in Boot partition</text><ellipse cx="1227.9375" cy="607.8906" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1221.7503" x2="1234.1247" y1="601.7034" y2="614.0778"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1234.1247" x2="1221.7503" y1="601.7034" y2="614.0778"/><rect fill="#FF0000" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1356.4375" y="500.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1366.4375" y="522.123">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="470.5" x2="470.5" y1="69.8633" y2="92.4297"/><polygon fill="#181818" points="466.5,82.4297,470.5,92.4297,474.5,82.4297,470.5,86.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="470.5" x2="470.5" y1="126.3984" y2="146.3984"/><polygon fill="#181818" points="466.5,136.3984,470.5,146.3984,474.5,136.3984,470.5,140.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="124" x2="124" y1="352.4609" y2="387.4609"/><polygon fill="#181818" points="120,377.4609,124,387.4609,128,377.4609,124,381.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="385.9375" x2="385.9375" y1="648.1563" y2="668.1563"/><polygon fill="#181818" points="381.9375,658.1563,385.9375,668.1563,389.9375,658.1563,385.9375,662.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="385.9375" x2="385.9375" y1="758" y2="778"/><polygon fill="#181818" points="381.9375,768,385.9375,778,389.9375,768,385.9375,772" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="395.9375" x2="385.9375" y1="522.7031" y2="522.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="385.9375" x2="385.9375" y1="522.7031" y2="558.3125"/><polygon fill="#181818" points="381.9375,548.3125,385.9375,558.3125,389.9375,548.3125,385.9375,552.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="582.9375" x2="592.9375" y1="522.7031" y2="522.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="592.9375" x2="592.9375" y1="522.7031" y2="558.3125"/><polygon fill="#181818" points="588.9375,548.3125,592.9375,558.3125,596.9375,548.3125,592.9375,552.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="523.6875" x2="489.4375" y1="461.4844" y2="461.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="489.4375" x2="489.4375" y1="461.4844" y2="497.0938"/><polygon fill="#181818" points="485.4375,487.0938,489.4375,497.0938,493.4375,487.0938,489.4375,491.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643.6875" x2="677.9375" y1="461.4844" y2="461.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="677.9375" x2="677.9375" y1="461.4844" y2="497.0938"/><polygon fill="#181818" points="673.9375,487.0938,677.9375,497.0938,681.9375,487.0938,677.9375,491.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.6875" x2="583.6875" y1="400.875" y2="435.875"/><polygon fill="#181818" points="579.6875,425.875,583.6875,435.875,587.6875,425.875,583.6875,429.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="842.4375" x2="842.4375" y1="548.9219" y2="583.9219"/><polygon fill="#181818" points="838.4375,573.9219,842.4375,583.9219,846.4375,573.9219,842.4375,577.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="842.4375" x2="842.4375" y1="645.8281" y2="668.3945"/><polygon fill="#181818" points="838.4375,658.3945,842.4375,668.3945,846.4375,658.3945,842.4375,662.3945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="900.1875" x2="842.4375" y1="471.7773" y2="471.7773"/><line style="stroke:#181818;stroke-width:1.0;" x1="842.4375" x2="842.4375" y1="471.7773" y2="500.9844"/><polygon fill="#181818" points="838.4375,490.9844,842.4375,500.9844,846.4375,490.9844,842.4375,494.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1036.1875" x2="1093.9375" y1="471.7773" y2="471.7773"/><line style="stroke:#181818;stroke-width:1.0;" x1="1093.9375" x2="1093.9375" y1="471.7773" y2="500.9844"/><polygon fill="#181818" points="1089.9375,490.9844,1093.9375,500.9844,1097.9375,490.9844,1093.9375,494.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1227.9375" x2="1227.9375" y1="562.8906" y2="597.8906"/><polygon fill="#181818" points="1223.9375,587.8906,1227.9375,597.8906,1231.9375,587.8906,1227.9375,591.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237.9375" x2="1227.9375" y1="471.7773" y2="471.7773"/><line style="stroke:#181818;stroke-width:1.0;" x1="1227.9375" x2="1227.9375" y1="471.7773" y2="500.9844"/><polygon fill="#181818" points="1223.9375,490.9844,1227.9375,500.9844,1231.9375,490.9844,1227.9375,494.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1373.9375" x2="1383.9375" y1="471.7773" y2="471.7773"/><line style="stroke:#181818;stroke-width:1.0;" x1="1383.9375" x2="1383.9375" y1="471.7773" y2="500.9844"/><polygon fill="#181818" points="1379.9375,490.9844,1383.9375,500.9844,1387.9375,490.9844,1383.9375,494.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="984.4375" x2="968.1875" y1="372.1445" y2="372.1445"/><line style="stroke:#181818;stroke-width:1.0;" x1="968.1875" x2="968.1875" y1="372.1445" y2="452.5703"/><polygon fill="#181818" points="964.1875,442.5703,968.1875,452.5703,972.1875,442.5703,968.1875,446.5703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="968.1875" y="409.7632">1. Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="972.1875" y="422.5679">is in New state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1172.4375" x2="1305.9375" y1="372.1445" y2="372.1445"/><line style="stroke:#181818;stroke-width:1.0;" x1="1305.9375" x2="1305.9375" y1="372.1445" y2="452.5703"/><polygon fill="#181818" points="1301.9375,442.5703,1305.9375,452.5703,1309.9375,442.5703,1305.9375,446.5703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="1305.9375" y="409.7632">2. Boot partition is</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="1309.9375" y="422.5679">in Success state</text><line style="stroke:#181818;stroke-width:1.0;" x1="735.0625" x2="583.6875" y1="323.7305" y2="323.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.6875" x2="583.6875" y1="323.7305" y2="352.9375"/><polygon fill="#181818" points="579.6875,342.9375,583.6875,352.9375,587.6875,342.9375,583.6875,346.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="927.0625" x2="1078.4375" y1="323.7305" y2="323.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="1078.4375" x2="1078.4375" y1="323.7305" y2="352.9375"/><polygon fill="#181818" points="1074.4375,342.9375,1078.4375,352.9375,1082.4375,342.9375,1078.4375,346.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="124" y1="268.9141" y2="268.9141"/><line style="stroke:#181818;stroke-width:1.0;" x1="124" x2="124" y1="268.9141" y2="304.5234"/><polygon fill="#181818" points="120,294.5234,124,304.5234,128,294.5234,124,298.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="831.0625" y1="268.9141" y2="268.9141"/><line style="stroke:#181818;stroke-width:1.0;" x1="831.0625" x2="831.0625" y1="268.9141" y2="304.5234"/><polygon fill="#181818" points="827.0625,294.5234,831.0625,304.5234,835.0625,294.5234,831.0625,298.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="470.5" x2="470.5" y1="208.3047" y2="243.3047"/><polygon fill="#181818" points="466.5,233.3047,470.5,243.3047,474.5,233.3047,470.5,237.3047" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[22b20bf409435cdd8521ce0548e32274]
@startuml
title Rust Boot Flow




start
note right: Power ON / Board Reset

:Rust Boot Start; 

:Opens Partitions \n 1. Boot Partition\n 2. Update Partition; 

if (Check the trailer magic\n of Boot Partition\n If Boot partition is \n BootInTesting State 0x10) then (True i.e. Updated \nfirmware was not able\n to set the image state \n to success state 0x00)
  :Trigger the Updated\n set Image state to Updating state;
  #palegreen: Roll back to the Boot firmware;
  kill
else (False)
  if (Check if the Update partition \n is in UpdateInUpdatingStage\n0x70) then (True);
    :Call rust Boot Update \n Open all 3 partitions;
    if (Verify Integrty \nand authenticity \nof Firmware in \nUpdate partition) then (True)
      if (Prevent rollback \n if Update Firmware Version \n > \n Boot Firmware version) then (True)
        :Swap the Update \n partition with \n Boot partition\n set the update image\n flag to Testing state;
        #palegreen:Jump to the \n updated firmware\n validate the firmware functionality\n set the Image flag \n to success state 0x00;
        stop
      else
        #red:Panic!;
        kill
      endif
    else(False)
      #red:Panic!;
      kill
    endif
  else (False)
    switch(Match Boot Partition type \n 1. BootInNewState 0xFF\n 2. BootInSuccessState 0x00)
    case (1. Boot partition \n is in New state)
      if (Verify the Integrity \n and autenticity of \n Boot partition) then (True)
        #palegreen:Jump to the Next firmware\n Boot firmware;
        #palegreen:Trigger the updated \n Set the Update Image state \n to Updating state 0x70;
        end
        note right: Power ON / Board Reset
      else (False)
        #red:Panic!;
        kill
      endif
    case (2. Boot partition is \n in Success state)
      if (Verify the Integrity \n and autenticity of \n Boot partition) then (True)
        #palegreen:Jump to the \n Updated firmware\n in Boot partition;
        end
      else (False)
        #red:Panic!;
        kill
@enduml

PlantUML version 1.2022.7beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>