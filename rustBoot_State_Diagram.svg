<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="920px" preserveAspectRatio="none" style="width:1340px;height:920px;background:#FFFFFF;" version="1.1" viewBox="0 0 1340 920" width="1340px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="125" x="606.4063" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115" x="611.4063" y="32.9951">rustBoot Flow</text><path d="M496.5,47.2969 L496.5,55.8633 L476.5,59.8633 L496.5,63.8633 L496.5,72.4297 A0,0 0 0 0 496.5,72.4297 L670.5,72.4297 A0,0 0 0 0 670.5,72.4297 L670.5,57.2969 L660.5,47.2969 L496.5,47.2969 A0,0 0 0 0 496.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M660.5,47.2969 L660.5,57.2969 L670.5,57.2969 L660.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="502.5" y="64.3638">Power ON / Board Reset</text><ellipse cx="466.5" cy="59.8633" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="415" y="92.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="425" y="113.5684">rustBoot Start</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="411" y="146.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="421" y="167.5371">Open Partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="421" y="181.5059"> </text><ellipse cx="426.5" cy="190.8047" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="433" y="195.4746">Boot</text><ellipse cx="426.5" cy="204.7734" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="433" y="209.4434">Update</text><polygon fill="#F1F1F1" points="394,257.2734,539,257.2734,551,282.8828,539,308.4922,394,308.4922,382,282.8828,394,257.2734" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="394" y="267.4839">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="394" y="280.2886"> </text><ellipse cx="399.5" cy="288.1875" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="405" y="293.0933">Boot is in Testing State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="398" y="305.8979">(0x10)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="255" y="241.8745">True i.e. Swapped</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="255" y="254.6792">firmware was not able</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="267.4839"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="259" y="267.4839">to set the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="280.2886"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="263" y="280.2886">success state (0x00)</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="551" y="280.2886">False</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="234" x="11" y="318.4922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="21" y="339.6309">Trigger Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="21" y="353.5996"> </text><ellipse cx="26.5" cy="362.8984" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="33" y="367.5684">set Image state to Updating state</text><rect fill="#FFA500" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="27" y="415.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="37" y="436.5371">Roll back to the Boot firmware</text><polygon fill="#F1F1F1" points="729.1875,318.4922,897.1875,318.4922,909.1875,344.1016,897.1875,369.7109,729.1875,369.7109,717.1875,344.1016,729.1875,318.4922" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="729.1875" y="328.7026">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="729.1875" y="341.5073">  </text><ellipse cx="734.6875" cy="349.4063" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="740.1875" y="354.312">Update is in Updating State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="729.1875" y="367.1167">(0x70)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="691.1875" y="341.5073">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="909.1875" y="341.5073">False</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="504.5625" y="379.7109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="514.5625" y="400.8496">Jump to rustBoot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="514.5625" y="414.8184">Open 3 partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="514.5625" y="428.7871"> </text><ellipse cx="520.0625" cy="438.0859" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="526.5625" y="442.7559">Boot</text><ellipse cx="520.0625" cy="452.0547" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="526.5625" y="456.7246">Update</text><ellipse cx="520.0625" cy="466.0234" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="526.5625" y="470.6934">Swap</text><polygon fill="#F1F1F1" points="541.0625,518.5234,637.0625,518.5234,649.0625,544.1328,637.0625,569.7422,541.0625,569.7422,529.0625,544.1328,541.0625,518.5234" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="541.0625" y="528.7339">Verify Integrty</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="541.0625" y="541.5386">and authenticity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="541.0625" y="554.3433">of Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="541.0625" y="567.1479">Update partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="503.0625" y="541.5386">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="649.0625" y="541.5386">False</text><polygon fill="#F1F1F1" points="431.3125,579.7422,570.3125,579.7422,582.3125,618.1563,570.3125,656.5703,431.3125,656.5703,419.3125,618.1563,431.3125,579.7422" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="431.3125" y="589.9526">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="435.3125" y="602.7573">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="431.3125" y="615.562">      </text><ellipse cx="436.8125" cy="623.4609" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="442.3125" y="628.3667">Update Image Version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="435.3125" y="641.1714">greater than</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="435.3125" y="653.9761">Boot Image version</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="393.3125" y="615.562">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="582.3125" y="615.562">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="328.3125" y="666.5703"/><ellipse cx="343.8125" cy="683.0391" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="350.3125" y="687.709">Swap the Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="346.3125" y="701.6777">partition with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="346.3125" y="715.6465">Boot partition</text><ellipse cx="343.8125" cy="724.9453" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="350.3125" y="729.6152">Set the update image</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="346.3125" y="743.584">flag to Testing state</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="286.8125" y="791.4141"/><ellipse cx="302.3125" cy="807.8828" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="308.8125" y="812.5527">Jump to the updated firmware</text><ellipse cx="302.3125" cy="821.8516" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="308.8125" y="826.5215">validate the firmware functionality</text><ellipse cx="302.3125" cy="835.8203" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="213" x="308.8125" y="840.4902">set the Image flag to success state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="312.8125" y="854.459">(0x00)</text><ellipse cx="409.3125" cy="898.2891" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="409.3125" cy="898.2891" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="564.8125" y="666.5703"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="574.8125" y="687.709">Panic!</text><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="649.8125" y="579.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="659.8125" y="600.8809">Panic!</text><polygon fill="#F1F1F1" points="947.3125,379.7109,1127.3125,379.7109,1139.3125,405.3203,1127.3125,430.9297,947.3125,430.9297,935.3125,405.3203,947.3125,379.7109" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="947.3125" y="389.9214">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="947.3125" y="402.7261"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="152" x="951.3125" y="415.5308">* Boot In New State (0xFF)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="951.3125" y="428.3354">* Boot In Success State (0x00)</text><polygon fill="#F1F1F1" points="878.0625,479.3438,986.0625,479.3438,998.0625,504.9531,986.0625,530.5625,878.0625,530.5625,866.0625,504.9531,878.0625,479.3438" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="878.0625" y="489.5542">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="882.0625" y="502.3589">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="882.0625" y="515.1636">Boot Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="882.0625" y="527.9683">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="840.0625" y="502.3589">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="998.0625" y="502.3589">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="789.3125" y="540.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="799.3125" y="561.7012">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="803.3125" y="575.6699">Boot firmware</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="744.8125" y="623.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="754.8125" y="644.6387">Trigger update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="754.8125" y="658.6074">  </text><ellipse cx="760.3125" cy="667.9063" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="766.8125" y="672.5762">Set the Update Image state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="762.8125" y="686.5449">to Updating state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="762.8125" y="700.5137">(0x70)</text><path d="M873.8125,748.3438 L873.8125,756.9102 L853.8125,760.9102 L873.8125,764.9102 L873.8125,773.4766 A0,0 0 0 0 873.8125,773.4766 L972.8125,773.4766 A0,0 0 0 0 972.8125,773.4766 L972.8125,758.3438 L962.8125,748.3438 L873.8125,748.3438 A0,0 0 0 0 873.8125,748.3438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M962.8125,748.3438 L962.8125,758.3438 L972.8125,758.3438 L962.8125,748.3438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="879.8125" y="765.4106">Board Reset</text><ellipse cx="843.8125" cy="760.9102" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="837.6253" x2="849.9997" y1="754.723" y2="767.0973"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="849.9997" x2="837.6253" y1="754.723" y2="767.0973"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="992.8125" y="540.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1002.8125" y="561.7012">Panic!</text><polygon fill="#F1F1F1" points="1172.3125,492.1484,1280.3125,492.1484,1292.3125,517.7578,1280.3125,543.3672,1172.3125,543.3672,1160.3125,517.7578,1172.3125,492.1484" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="1172.3125" y="502.3589">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="1176.3125" y="515.1636">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1176.3125" y="527.9683">Update Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1176.3125" y="540.7729">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="1134.3125" y="515.1636">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1292.3125" y="515.1636">False</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1087.8125" y="553.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1097.8125" y="574.5059">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1101.8125" y="588.4746">Update firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="1101.8125" y="602.4434">in Boot partition</text><ellipse cx="1150.3125" cy="660.2734" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1144.1253" x2="1156.4997" y1="654.0863" y2="666.4606"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1156.4997" x2="1144.1253" y1="654.0863" y2="666.4606"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1274.8125" y="553.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1284.8125" y="574.5059">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="69.8633" y2="92.4297"/><polygon fill="#181818" points="462.5,82.4297,466.5,92.4297,470.5,82.4297,466.5,86.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="126.3984" y2="146.3984"/><polygon fill="#181818" points="462.5,136.3984,466.5,146.3984,470.5,136.3984,466.5,140.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="380.3984" y2="415.3984"/><polygon fill="#181818" points="124,405.3984,128,415.3984,132,405.3984,128,409.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="756.4141" y2="791.4141"/><polygon fill="#181818" points="405.3125,781.4141,409.3125,791.4141,413.3125,781.4141,409.3125,785.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="867.2891" y2="887.2891"/><polygon fill="#181818" points="405.3125,877.2891,409.3125,887.2891,413.3125,877.2891,409.3125,881.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="419.3125" x2="409.3125" y1="618.1563" y2="618.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="618.1563" y2="666.5703"/><polygon fill="#181818" points="405.3125,656.5703,409.3125,666.5703,413.3125,656.5703,409.3125,660.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="582.3125" x2="592.3125" y1="618.1563" y2="618.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="592.3125" x2="592.3125" y1="618.1563" y2="666.5703"/><polygon fill="#181818" points="588.3125,656.5703,592.3125,666.5703,596.3125,656.5703,592.3125,660.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="529.0625" x2="500.8125" y1="544.1328" y2="544.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="500.8125" x2="500.8125" y1="544.1328" y2="579.7422"/><polygon fill="#181818" points="496.8125,569.7422,500.8125,579.7422,504.8125,569.7422,500.8125,573.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="649.0625" x2="677.3125" y1="544.1328" y2="544.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="677.3125" x2="677.3125" y1="544.1328" y2="579.7422"/><polygon fill="#181818" points="673.3125,569.7422,677.3125,579.7422,681.3125,569.7422,677.3125,573.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589.0625" x2="589.0625" y1="483.5234" y2="518.5234"/><polygon fill="#181818" points="585.0625,508.5234,589.0625,518.5234,593.0625,508.5234,589.0625,512.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="588.5" y2="623.5"/><polygon fill="#181818" points="839.8125,613.5,843.8125,623.5,847.8125,613.5,843.8125,617.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="713.3438" y2="750.9102"/><polygon fill="#181818" points="839.8125,740.9102,843.8125,750.9102,847.8125,740.9102,843.8125,744.9102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="866.0625" x2="843.8125" y1="504.9531" y2="504.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="504.9531" y2="540.5625"/><polygon fill="#181818" points="839.8125,530.5625,843.8125,540.5625,847.8125,530.5625,843.8125,534.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="998.0625" x2="1020.3125" y1="504.9531" y2="504.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020.3125" x2="1020.3125" y1="504.9531" y2="540.5625"/><polygon fill="#181818" points="1016.3125,530.5625,1020.3125,540.5625,1024.3125,530.5625,1020.3125,534.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150.3125" x2="1150.3125" y1="615.2734" y2="650.2734"/><polygon fill="#181818" points="1146.3125,640.2734,1150.3125,650.2734,1154.3125,640.2734,1150.3125,644.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160.3125" x2="1150.3125" y1="517.7578" y2="517.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150.3125" x2="1150.3125" y1="517.7578" y2="553.3672"/><polygon fill="#181818" points="1146.3125,543.3672,1150.3125,553.3672,1154.3125,543.3672,1150.3125,547.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1292.3125" x2="1302.3125" y1="517.7578" y2="517.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="1302.3125" x2="1302.3125" y1="517.7578" y2="553.3672"/><polygon fill="#181818" points="1298.3125,543.3672,1302.3125,553.3672,1306.3125,543.3672,1302.3125,547.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="935.3125" x2="932.0625" y1="405.3203" y2="405.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.0625" x2="932.0625" y1="405.3203" y2="479.3438"/><polygon fill="#181818" points="928.0625,469.3438,932.0625,479.3438,936.0625,469.3438,932.0625,473.3438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="932.0625" y="446.1401">* Boot in New state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1139.3125" x2="1226.3125" y1="405.3203" y2="405.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="1226.3125" x2="1226.3125" y1="405.3203" y2="492.1484"/><polygon fill="#181818" points="1222.3125,482.1484,1226.3125,492.1484,1230.3125,482.1484,1226.3125,486.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1226.3125" y="446.1401">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1230.3125" y="458.9448">Success state</text><line style="stroke:#181818;stroke-width:1.0;" x1="717.1875" x2="589.0625" y1="344.1016" y2="344.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="589.0625" x2="589.0625" y1="344.1016" y2="379.7109"/><polygon fill="#181818" points="585.0625,369.7109,589.0625,379.7109,593.0625,369.7109,589.0625,373.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="909.1875" x2="1037.3125" y1="344.1016" y2="344.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="1037.3125" x2="1037.3125" y1="344.1016" y2="379.7109"/><polygon fill="#181818" points="1033.3125,369.7109,1037.3125,379.7109,1041.3125,369.7109,1037.3125,373.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="128" y1="282.8828" y2="282.8828"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="282.8828" y2="318.4922"/><polygon fill="#181818" points="124,308.4922,128,318.4922,132,308.4922,128,312.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="813.1875" y1="282.8828" y2="282.8828"/><line style="stroke:#181818;stroke-width:1.0;" x1="813.1875" x2="813.1875" y1="282.8828" y2="318.4922"/><polygon fill="#181818" points="809.1875,308.4922,813.1875,318.4922,817.1875,308.4922,813.1875,312.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="222.2734" y2="257.2734"/><polygon fill="#181818" points="462.5,247.2734,466.5,257.2734,470.5,247.2734,466.5,251.2734" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[e74738199b311e2b52365988f62089a5]
@startuml
title rustBoot Flow




start
note right: Power ON / Board Reset

  :rustBoot Start; 

  :Open Partitions 
  
  * Boot 
  * Update ;

if (Check 

* Boot is in Testing State \n (0x10)) then (<color:green>True i.e. Swapped \n<color:green>firmware was not able\n <color:green>to set the \n <color:green> success state (0x00))
  :Trigger Update
  
  * set Image state to Updating state;
  #Orange:Roll back to the Boot firmware;
  kill
else (<color:red>False)
  if (Check 
  
* Update is in Updating State\n(0x70)) then (<color:green>True);
    :Jump to rustBoot Update
    Open 3 partitions
    
    * Boot
    * Update
    * Swap;
    if (Verify Integrty \nand authenticity \nof Image in \nUpdate partition) then (<color:green>True)
      if (Prevent rollback \n Check 
      
* Update Image Version \n greater than \n Boot Image version) then (<color:green>True)
        :* Swap the Update
          partition with
          Boot partition
        * Set the update image
          flag to Testing state;
        :* Jump to the updated firmware 
        * validate the firmware functionality
        * set the Image flag to success state 
            (0x00);
        stop
      else(<color:red>False) 
        #Salmon:Panic!;
        kill
      endif
    else(<color:red>False)
      #Salmon:Panic!;
      kill
    endif
  else (<color:red>False)
    switch(Check \n\n * Boot In New State (0xFF)\n * Boot In Success State (0x00))
    case (* Boot in New state)
      if (Verify Integrity \n and autenticity of \n Boot Image in \n Boot partition) then (<color:green>True)
        :Jump to the\n Boot firmware;
          :Trigger update 
          
        * Set the Update Image state
          to Updating state 
          (0x70);
        end
        note right: Board Reset
      else (<color:red>False)
        #Salmon:Panic!;
        kill
      endif
    case (* Boot in \n Success state)
      if (Verify Integrity \n and autenticity of \n Update Image in \n Boot partition) then (<color:green>True)
        :Jump to the \n Update firmware\n in Boot partition;
        end
      else (<color:red>False)
        #Salmon:Panic!;
        kill
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>