<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1002px" preserveAspectRatio="none" style="width:1714px;height:1002px;background:#FFFFFF;" version="1.1" viewBox="0 0 1714 1002" width="1714px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="125" x="793.25" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115" x="798.25" y="32.9951">rustBoot Flow</text><rect fill="#DDDDDD" height="97.4844" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;" width="182" x="1511.5" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1517.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="45" x="1521.5" y="76.292">Value</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1566.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1570.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="1574.5" y="76.292">States</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1628.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1521.5" y="92.5889">0xFF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1574.5" y="92.5889">New State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1521.5" y="108.8857">0x70</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1574.5" y="108.8857">Updating State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1521.5" y="125.1826">0x10</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1574.5" y="125.1826">Testing State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1521.5" y="141.4795">0x00</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1574.5" y="141.4795">Success State</text><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="63.2969" y2="63.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="79.5938" y2="79.5938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="95.8906" y2="95.8906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="112.1875" y2="112.1875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="128.4844" y2="128.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1687.5" y1="144.7813" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1517.5" x2="1517.5" y1="63.2969" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1570.5" x2="1570.5" y1="63.2969" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1687.5" x2="1687.5" y1="63.2969" y2="144.7813"/><path d="M563.875,161.7813 L563.875,170.3477 L543.875,174.3477 L563.875,178.3477 L563.875,186.9141 A0,0 0 0 0 563.875,186.9141 L737.875,186.9141 A0,0 0 0 0 737.875,186.9141 L737.875,171.7813 L727.875,161.7813 L563.875,161.7813 A0,0 0 0 0 563.875,161.7813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M727.875,161.7813 L727.875,171.7813 L737.875,171.7813 L727.875,161.7813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="569.875" y="178.8481">Power ON / Board Reset</text><ellipse cx="533.875" cy="174.3477" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="482.375" y="206.9141"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="492.375" y="228.0527">rustBoot Start</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="466.375" y="260.8828"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="476.375" y="282.0215">Open Partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="476.375" y="295.9902"> </text><ellipse cx="481.875" cy="305.2891" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="488.375" y="309.959">Boot</text><ellipse cx="481.875" cy="319.2578" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="488.375" y="323.9277">Update</text><polygon fill="#FFA500" points="441.375,356.7578,626.375,356.7578,638.375,388.7695,626.375,420.7813,441.375,420.7813,429.375,388.7695,441.375,356.7578" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="441.375" y="366.9683"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="441.375" y="379.7729">                  </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="513.375" y="379.7729">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="552.375" y="379.7729"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="441.375" y="392.5776"> </text><ellipse cx="446.875" cy="400.4766" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="174" x="452.375" y="405.3823">Boot is in Testing State (0x10)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="441.375" y="418.187"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="398.375" y="386.1753">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="638.375" y="386.1753">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="243" x="11" y="430.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="21" y="451.9199">               </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="81" y="451.9199">Trigger Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="21" y="465.8887"> </text><ellipse cx="26.5" cy="475.1875" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="211" x="33" y="479.8574">Swapped firmware was not able to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="175" x="37" y="493.8262">set the success state (0x00)</text><ellipse cx="26.5" cy="503.125" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="33" y="507.7949">set Image state to Updating state</text><rect fill="#DDA0DD" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="31.5" y="555.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="41.5" y="576.7637">Roll back to the Boot firmware</text><polygon fill="#FFA500" points="871.25,430.7813,1079.25,430.7813,1091.25,462.793,1079.25,494.8047,871.25,494.8047,859.25,462.793,871.25,430.7813" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="871.25" y="440.9917"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="871.25" y="453.7964">                    </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="951.25" y="453.7964">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="990.25" y="453.7964"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="871.25" y="466.6011">  </text><ellipse cx="876.75" cy="474.5" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="197" x="882.25" y="479.4058">Update is in Updating State (0x70)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="871.25" y="492.2104"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="828.25" y="460.1987">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1091.25" y="460.1987">False</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="584" y="504.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="594" y="525.9434">Jump to rustBoot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="594" y="539.9121">Open 3 partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="594" y="553.8809"> </text><ellipse cx="599.5" cy="563.1797" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="606" y="567.8496">Boot</text><ellipse cx="599.5" cy="577.1484" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="606" y="581.8184">Update</text><ellipse cx="599.5" cy="591.1172" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="606" y="595.7871">Swap</text><polygon fill="#FFA500" points="566,629.3828,771,629.3828,783,654.9922,771,680.6016,566,680.6016,554,654.9922,566,629.3828" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="566" y="639.5933"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="574" y="652.3979">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="612" y="652.3979">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="663" y="652.3979">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="688" y="652.3979">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="760" y="652.3979">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="570" y="665.2026">Image in Update partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="566" y="678.0073"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="523" y="652.3979">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="783" y="652.3979">False</text><polygon fill="#FFA500" points="437,690.6016,651,690.6016,663,735.418,651,780.2344,437,780.2344,425,735.418,437,690.6016" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="437" y="700.812"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="64" x="437" y="713.6167">                </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="501" y="713.6167">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="611" y="713.6167"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="437" y="726.4214">                     </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="521" y="726.4214">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="560" y="726.4214"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="437" y="739.2261">      </text><ellipse cx="442.5" cy="747.125" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="203" x="448" y="752.0308">Update Image Version greater than</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="441" y="764.8354">Boot Image version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="437" y="777.6401"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="394" y="732.8237">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="663" y="732.8237">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="302" x="264" y="790.2344"/><ellipse cx="279.5" cy="806.7031" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="270" x="286" y="811.373">Swap the Update partition with Boot partition</text><ellipse cx="279.5" cy="820.6719" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="254" x="286" y="825.3418">Set the update image flag to Testing state</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="277" x="276.5" y="860.0977"/><ellipse cx="292" cy="876.5664" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="298.5" y="881.2363">Jump to the updated firmware</text><ellipse cx="292" cy="890.5352" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="298.5" y="895.2051">validate the firmware functionality</text><ellipse cx="292" cy="904.5039" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="199" x="298.5" y="909.1738">Update Image state flags erased</text><ellipse cx="292" cy="918.4727" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="245" x="298.5" y="923.1426">set the boot Image flag to success state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="302.5" y="937.1113">(0x00)</text><ellipse cx="415" cy="980.9414" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="415" cy="980.9414" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="645.5" y="790.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="655.5" y="811.373">Panic!</text><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="765.5" y="690.6016"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="775.5" y="711.7402">Panic!</text><polygon fill="#FFA500" points="1192,504.8047,1372,504.8047,1384,543.2188,1372,581.6328,1192,581.6328,1180,543.2188,1192,504.8047" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1192" y="515.0151"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="1192" y="527.8198">                 </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="1260" y="527.8198">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1192" y="540.6245"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="152" x="1196" y="553.4292">* Boot In New State (0xFF)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="1196" y="566.2339">* Boot In Success State (0x00)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1192" y="579.0386"> </text><polygon fill="#FFA500" points="1035.5,628.6172,1240.5,628.6172,1252.5,654.2266,1240.5,679.8359,1035.5,679.8359,1023.5,654.2266,1035.5,628.6172" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1035.5" y="638.8276"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1039.5" y="651.6323">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="1077.5" y="651.6323">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1128.5" y="651.6323">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="1153.5" y="651.6323">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1225.5" y="651.6323">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="1039.5" y="664.437">Boot Image in Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1035.5" y="677.2417"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="992.5" y="651.6323">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1252.5" y="651.6323">False</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="178" x="924.5" y="689.8359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="934.5" y="710.9746">Jump to the Boot firmware</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="306" x="860.5" y="758.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="870.5" y="779.9434">                       </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="962.5" y="779.9434">Trigger update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="870.5" y="793.9121">  </text><ellipse cx="876" cy="803.2109" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="274" x="882.5" y="807.8809">Set the Update Image state to Updating state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="982.5" y="821.8496">(0x70)</text><path d="M1044.5,856.6055 L1044.5,865.1719 L1024.5,869.1719 L1044.5,873.1719 L1044.5,881.7383 A0,0 0 0 0 1044.5,881.7383 L1143.5,881.7383 A0,0 0 0 0 1143.5,881.7383 L1143.5,866.6055 L1133.5,856.6055 L1044.5,856.6055 A0,0 0 0 0 1044.5,856.6055 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1133.5,856.6055 L1133.5,866.6055 L1143.5,866.6055 L1133.5,856.6055 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1050.5" y="873.6724">Board Reset</text><ellipse cx="1013.5" cy="869.1719" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="1013.5" cy="869.1719" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1235" y="689.8359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1245" y="710.9746">Panic!</text><polygon fill="#FFA500" points="1449,628.6172,1654,628.6172,1666,654.2266,1654,679.8359,1449,679.8359,1437,654.2266,1449,628.6172" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1449" y="638.8276"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1453" y="651.6323">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="1491" y="651.6323">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1542" y="651.6323">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="1567" y="651.6323">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1639" y="651.6323">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="175" x="1453" y="664.437">Update Image in Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1449" y="677.2417"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1406" y="651.6323">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1666" y="651.6323">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="1330" y="689.8359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="1340" y="710.9746">Jump to the Update firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="1356" y="724.9434">in Boot partition</text><ellipse cx="1427" cy="783.7734" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="1427" cy="783.7734" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1648.5" y="689.8359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1658.5" y="710.9746">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="533.875" x2="533.875" y1="184.3477" y2="206.9141"/><polygon fill="#181818" points="529.875,196.9141,533.875,206.9141,537.875,196.9141,533.875,200.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533.875" x2="533.875" y1="240.8828" y2="260.8828"/><polygon fill="#181818" points="529.875,250.8828,533.875,260.8828,537.875,250.8828,533.875,254.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="132.5" x2="132.5" y1="520.625" y2="555.625"/><polygon fill="#181818" points="128.5,545.625,132.5,555.625,136.5,545.625,132.5,549.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="838.1719" y2="860.0977"/><polygon fill="#181818" points="411,850.0977,415,860.0977,419,850.0977,415,854.0977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="949.9414" y2="969.9414"/><polygon fill="#181818" points="411,959.9414,415,969.9414,419,959.9414,415,963.9414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="425" x2="415" y1="735.418" y2="735.418"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="735.418" y2="790.2344"/><polygon fill="#181818" points="411,780.2344,415,790.2344,419,780.2344,415,784.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="663" x2="673" y1="735.418" y2="735.418"/><line style="stroke:#181818;stroke-width:1.0;" x1="673" x2="673" y1="735.418" y2="790.2344"/><polygon fill="#181818" points="669,780.2344,673,790.2344,677,780.2344,673,784.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="544" y1="654.9922" y2="654.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="544" x2="544" y1="654.9922" y2="690.6016"/><polygon fill="#181818" points="540,680.6016,544,690.6016,548,680.6016,544,684.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="783" x2="793" y1="654.9922" y2="654.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="793" x2="793" y1="654.9922" y2="690.6016"/><polygon fill="#181818" points="789,680.6016,793,690.6016,797,680.6016,793,684.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="668.5" x2="668.5" y1="608.6172" y2="629.3828"/><polygon fill="#181818" points="664.5,619.3828,668.5,629.3828,672.5,619.3828,668.5,623.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1013.5" y1="723.8047" y2="758.8047"/><polygon fill="#181818" points="1009.5,748.8047,1013.5,758.8047,1017.5,748.8047,1013.5,752.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1013.5" y1="834.6797" y2="858.1719"/><polygon fill="#181818" points="1009.5,848.1719,1013.5,858.1719,1017.5,848.1719,1013.5,852.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1023.5" x2="1013.5" y1="654.2266" y2="654.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1013.5" y1="654.2266" y2="689.8359"/><polygon fill="#181818" points="1009.5,679.8359,1013.5,689.8359,1017.5,679.8359,1013.5,683.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1252.5" x2="1262.5" y1="654.2266" y2="654.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1262.5" x2="1262.5" y1="654.2266" y2="689.8359"/><polygon fill="#181818" points="1258.5,679.8359,1262.5,689.8359,1266.5,679.8359,1262.5,683.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1427" x2="1427" y1="737.7734" y2="772.7734"/><polygon fill="#181818" points="1423,762.7734,1427,772.7734,1431,762.7734,1427,766.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1437" x2="1427" y1="654.2266" y2="654.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1427" x2="1427" y1="654.2266" y2="689.8359"/><polygon fill="#181818" points="1423,679.8359,1427,689.8359,1431,679.8359,1427,683.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1666" x2="1676" y1="654.2266" y2="654.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="1676" x2="1676" y1="654.2266" y2="689.8359"/><polygon fill="#181818" points="1672,679.8359,1676,689.8359,1680,679.8359,1676,683.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1180" x2="1138" y1="543.2188" y2="543.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="1138" x2="1138" y1="543.2188" y2="628.6172"/><polygon fill="#181818" points="1134,618.6172,1138,628.6172,1142,618.6172,1138,622.6172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1138" y="590.4409"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="1138" y="603.2456">* Boot in New state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1384" x2="1551.5" y1="543.2188" y2="543.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="1551.5" x2="1551.5" y1="543.2188" y2="628.6172"/><polygon fill="#181818" points="1547.5,618.6172,1551.5,628.6172,1555.5,618.6172,1551.5,622.6172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1551.5" y="590.4409">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1555.5" y="603.2456">Success state</text><line style="stroke:#181818;stroke-width:1.0;" x1="859.25" x2="668.5" y1="462.793" y2="462.793"/><line style="stroke:#181818;stroke-width:1.0;" x1="668.5" x2="668.5" y1="462.793" y2="504.8047"/><polygon fill="#181818" points="664.5,494.8047,668.5,504.8047,672.5,494.8047,668.5,498.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1091.25" x2="1282" y1="462.793" y2="462.793"/><line style="stroke:#181818;stroke-width:1.0;" x1="1282" x2="1282" y1="462.793" y2="504.8047"/><polygon fill="#181818" points="1278,494.8047,1282,504.8047,1286,494.8047,1282,498.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="429.375" x2="132.5" y1="388.7695" y2="388.7695"/><line style="stroke:#181818;stroke-width:1.0;" x1="132.5" x2="132.5" y1="388.7695" y2="430.7813"/><polygon fill="#181818" points="128.5,420.7813,132.5,430.7813,136.5,420.7813,132.5,424.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="638.375" x2="975.25" y1="388.7695" y2="388.7695"/><line style="stroke:#181818;stroke-width:1.0;" x1="975.25" x2="975.25" y1="388.7695" y2="430.7813"/><polygon fill="#181818" points="971.25,420.7813,975.25,430.7813,979.25,420.7813,975.25,424.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533.875" x2="533.875" y1="336.7578" y2="356.7578"/><polygon fill="#181818" points="529.875,346.7578,533.875,356.7578,537.875,346.7578,533.875,350.7578" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[ddc389dc36ac56a9dd8c85a64c9f1768]
@startuml
title rustBoot Flow

start
note right: Power ON / Board Reset

  :rustBoot Start; 

  :**Open Partitions** 
  
  * Boot 
  * Update ;

#orange:if (
                  **Check** 

* Boot is in Testing State (0x10)\n) then (<color:green>**True**)


  :               **Trigger Update**
  
  * Swapped firmware was not able to 
      set the success state (0x00)
  * set Image state to Updating state;
  #plum:Roll back to the Boot firmware;
  kill
else (<color:red>**False**)
  #orange:if (
                    **Check** 
  
* Update is in Updating State (0x70)\n) then (<color:green>**True**);
    :Jump to rustBoot Update
    Open 3 partitions
    
    * Boot
    * Update
    * Swap;
    #orange:if (
  Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of\n Image in Update partition \n) then (<color:green>**True**)
    
      #orange:if (\n                **Prevent rollback** \n                     **Check** 
      
* Update Image Version greater than \n Boot Image version \n) then (<color:green>**True**)
        :* Swap the Update partition with Boot partition
        * Set the update image flag to Testing state;
        :* Jump to the updated firmware 
        * validate the firmware functionality
        * Update Image state flags erased
        * set the boot Image flag to success state 
            (0x00);
        stop
      else(<color:red>**False**) 
        #tomato:Panic!;
        kill
      endif
    else(<color:red>**False**)
      #tomato:Panic!;
      kill
    endif
  else (<color:red>**False**)
  <style>
diamond  {
  BackgroundColor orange
}
</style>
    switch(\n                 **Check**\n \n * Boot In New State (0xFF)\n * Boot In Success State (0x00)\n)
    case (\n* Boot in New state)
      #orange:if (\n Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of \n Boot Image in Boot partition\n) then (<color:green>**True**)
        :Jump to the Boot firmware;
          :                       **Trigger update** 
          
        * Set the Update Image state to Updating state 
                                    (0x70);
        stop
         note right: Board Reset
        
      else (<color:red>**False**)
        #tomato:Panic!;
        kill
      endif
    case (* Boot in \n Success state)
      #orange:if (\n Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of \n Update Image in Boot partition\n) then (<color:green>**True**)
        :Jump to the Update firmware 
            in Boot partition;
        stop
      else (<color:red>**False**)
        #tomato:Panic!;
        kill


legend top right
    | **Value** | **States** |
    | 0xFF  | New State |
    | 0x70  | Updating State |
    | 0x10  | Testing State |
    | 0x00  | Success State |
endlegend
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>