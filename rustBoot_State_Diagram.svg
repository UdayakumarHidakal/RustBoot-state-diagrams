<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1066px" preserveAspectRatio="none" style="width:1789px;height:1066px;background:#D3D3D3;" version="1.1" viewBox="0 0 1789 1066" width="1789px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="68.2031" id="_title" style="stroke:#00000000;stroke-width:1.0;" width="490" x="648.0625" y="15"/><text fill="#000000" font-family="sans-serif" font-size="50" font-weight="bold" lengthAdjust="spacing" textLength="480" x="653.0625" y="66.4111">MCU update flow</text><rect fill="#D3D3D3" height="97.4844" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;" width="182" x="1586.125" y="97.2031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1592.125" y="118.1982"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="45" x="1596.125" y="118.1982">Value</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1641.125" y="118.1982"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1645.125" y="118.1982"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="1649.125" y="118.1982">States</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1703.125" y="118.1982"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1596.125" y="134.4951">0xFF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1649.125" y="134.4951">New State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1596.125" y="150.792">0x70</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1649.125" y="150.792">Updating State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1596.125" y="167.0889">0x10</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1649.125" y="167.0889">Testing State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1596.125" y="183.3857">0x00</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1649.125" y="183.3857">Success State</text><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="105.2031" y2="105.2031"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="121.5" y2="121.5"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="137.7969" y2="137.7969"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="154.0938" y2="154.0938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="170.3906" y2="170.3906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1762.125" y1="186.6875" y2="186.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1592.125" x2="1592.125" y1="105.2031" y2="186.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1645.125" x2="1645.125" y1="105.2031" y2="186.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1762.125" x2="1762.125" y1="105.2031" y2="186.6875"/><path d="M577.9375,203.6875 L577.9375,212.2539 L557.9375,216.2539 L577.9375,220.2539 L577.9375,228.8203 A0,0 0 0 0 577.9375,228.8203 L751.9375,228.8203 A0,0 0 0 0 751.9375,228.8203 L751.9375,213.6875 L741.9375,203.6875 L577.9375,203.6875 A0,0 0 0 0 577.9375,203.6875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M741.9375,203.6875 L741.9375,213.6875 L751.9375,213.6875 L741.9375,203.6875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="583.9375" y="220.7544">Power ON / Board Reset</text><ellipse cx="547.9375" cy="216.2539" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="496.4375" y="248.8203"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="506.4375" y="269.959">rustBoot Start</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="480.4375" y="302.7891"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="490.4375" y="323.9277">Open Partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="490.4375" y="337.8965"> </text><ellipse cx="495.9375" cy="347.1953" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="502.4375" y="351.8652">Boot</text><ellipse cx="495.9375" cy="361.1641" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="502.4375" y="365.834">Update</text><polygon fill="#FFA500" points="448.9375,398.6641,646.9375,398.6641,658.9375,430.6758,646.9375,462.6875,448.9375,462.6875,436.9375,430.6758,448.9375,398.6641" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="448.9375" y="408.8745"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="448.9375" y="421.6792">                  </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="520.9375" y="421.6792">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="559.9375" y="421.6792"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="448.9375" y="434.4839"> </text><ellipse cx="454.4375" cy="442.3828" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="459.9375" y="447.2886">Is Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="51" x="516.9375" y="447.2886">Testing</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="571.9375" y="447.2886">state (0x10)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="448.9375" y="460.0933"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="405.9375" y="428.0815">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="658.9375" y="428.0815">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="11" y="472.6875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="21" y="493.8262">               </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="81" y="493.8262">Trigger Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="21" y="507.7949"> </text><ellipse cx="26.5" cy="517.0938" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="211" x="33" y="521.7637">Swapped firmware was not able to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="37" y="535.7324">set the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="58" x="83" y="535.7324">success</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="145" y="535.7324">state (0x00)</text><ellipse cx="26.5" cy="545.0313" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="33" y="549.7012">set Image state to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="65" x="147" y="549.7012">Updating</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="216" y="549.7012">state</text><rect fill="#DDA0DD" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="32.5" y="597.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="42.5" y="618.6699">Roll back to the Boot firmware</text><polygon fill="#FFA500" points="881.5,472.6875,1103.5,472.6875,1115.5,504.6992,1103.5,536.7109,881.5,536.7109,869.5,504.6992,881.5,472.6875" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="881.5" y="482.8979"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="881.5" y="495.7026">                    </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="961.5" y="495.7026">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1000.5" y="495.7026"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="881.5" y="508.5073">  </text><ellipse cx="887" cy="516.4063" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="892.5" y="521.312">Is Update in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="964.5" y="521.312">Updating</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1028.5" y="521.312">state (0x70)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="881.5" y="534.1167"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="838.5" y="502.105">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1115.5" y="502.105">False</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="598" y="546.7109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="608" y="567.8496">Begin rustBoot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="608" y="581.8184">Open 3 partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="608" y="595.7871"> </text><ellipse cx="613.5" cy="605.0859" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="620" y="609.7559">Boot</text><ellipse cx="613.5" cy="619.0547" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="620" y="623.7246">Update</text><ellipse cx="613.5" cy="633.0234" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="620" y="637.6934">Swap</text><polygon fill="#FFA500" points="574,684.0938,779,684.0938,791,709.7031,779,735.3125,574,735.3125,562,709.7031,574,684.0938" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="574" y="694.3042"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="582" y="707.1089">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="620" y="707.1089">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="671" y="707.1089">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="696" y="707.1089">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="768" y="707.1089">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="578" y="719.9136">Image in Update partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="574" y="732.7183"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="531" y="707.1089">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="791" y="707.1089">False</text><polygon fill="#FFA500" points="439,745.3125,665,745.3125,677,790.1289,665,834.9453,439,834.9453,427,790.1289,439,745.3125" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="439" y="755.5229"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="64" x="439" y="768.3276">                </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="503" y="768.3276">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="613" y="768.3276"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="439" y="781.1323">                     </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="523" y="781.1323">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="562" y="781.1323"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="439" y="793.937">      </text><ellipse cx="444.5" cy="801.8359" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="215" x="450" y="806.7417">Is Update image version greater than</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="443" y="819.5464">Boot image version?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="439" y="832.3511"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="396" y="787.5347">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="677" y="787.5347">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="302" x="266" y="844.9453"/><ellipse cx="281.5" cy="861.4141" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="270" x="288" y="866.084">Swap the Update partition with Boot partition</text><ellipse cx="281.5" cy="875.3828" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172" x="288" y="880.0527">Set the update image flag to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56" x="464" y="880.0527">Testing</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="524" y="880.0527">state</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="285" x="274.5" y="923.3594"/><ellipse cx="290" cy="939.8281" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="296.5" y="944.498">Jump to the updated firmware</text><ellipse cx="290" cy="953.7969" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="296.5" y="958.4668">validate the firmware functionality</text><ellipse cx="290" cy="967.7656" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="199" x="296.5" y="972.4355">Update image state flags erased</text><ellipse cx="290" cy="981.7344" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="296.5" y="986.4043">set the boot image flag to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="58" x="457.5" y="986.4043">success</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="519.5" y="986.4043">state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="300.5" y="1000.373">(0x00)</text><ellipse cx="417" cy="1044.2031" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="417" cy="1044.2031" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="659.5" y="844.9453"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="669.5" y="866.084">Panic!</text><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="773.5" y="745.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="783.5" y="766.4512">Panic!</text><polygon fill="#FFA500" points="1217.375,546.7109,1419.375,546.7109,1431.375,585.125,1419.375,623.5391,1217.375,623.5391,1205.375,585.125,1217.375,546.7109" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1217.375" y="556.9214"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="1217.375" y="569.7261">                 </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="1285.375" y="569.7261">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1217.375" y="582.5308"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="1221.375" y="595.3354">* Is Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="27" x="1288.375" y="595.3354">New</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="1319.375" y="595.3354">state (0xFF)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="1221.375" y="608.1401">* Is Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="1288.375" y="608.1401">Success</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1344.375" y="608.1401">state (0x00)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1217.375" y="620.9448"> </text><polygon fill="#FFA500" points="1042.625,683.3281,1247.625,683.3281,1259.625,708.9375,1247.625,734.5469,1042.625,734.5469,1030.625,708.9375,1042.625,683.3281" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1042.625" y="693.5386"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1046.625" y="706.3433">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="1084.625" y="706.3433">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1135.625" y="706.3433">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="1160.625" y="706.3433">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1232.625" y="706.3433">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="1046.625" y="719.1479">Boot Image in Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1042.625" y="731.9526"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="999.625" y="706.3433">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1259.625" y="706.3433">False</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="277" x="882.125" y="744.5469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="257" x="892.125" y="765.6855">Jump to the Boot firmware in boot partition</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="324" x="858.625" y="813.5156"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="868.625" y="834.6543">                       </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="960.625" y="834.6543">Trigger update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="868.625" y="848.623">  </text><ellipse cx="874.125" cy="857.9219" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="206" x="880.625" y="862.5918">Checks for the update, if available</text><ellipse cx="874.125" cy="871.8906" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="189" x="880.625" y="876.5605">Sets the Update image state to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="65" x="1073.625" y="876.5605">Updating</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="1142.625" y="876.5605">state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="980.625" y="890.5293">(0x70)</text><path d="M1051.625,933.8359 L1051.625,942.4023 L1031.625,946.4023 L1051.625,950.4023 L1051.625,958.9688 A0,0 0 0 0 1051.625,958.9688 L1150.625,958.9688 A0,0 0 0 0 1150.625,958.9688 L1150.625,943.8359 L1140.625,933.8359 L1051.625,933.8359 A0,0 0 0 0 1051.625,933.8359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1140.625,933.8359 L1140.625,943.8359 L1150.625,943.8359 L1140.625,933.8359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1057.625" y="950.9028">Board Reset</text><ellipse cx="1020.625" cy="946.4023" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="1020.625" cy="946.4023" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1242.125" y="744.5469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1252.125" y="765.6855">Panic!</text><polygon fill="#FFA500" points="1523.625,670.5234,1728.625,670.5234,1740.625,696.1328,1728.625,721.7422,1523.625,721.7422,1511.625,696.1328,1523.625,670.5234" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1523.625" y="680.7339"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1527.625" y="693.5386">Verify</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" target="_top" title="Verify Integrity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg" xlink:show="new" xlink:title="Verify Integrity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="1565.625" y="693.5386">Integrity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1616.625" y="693.5386">and</text><a href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" target="_top" title="Verify Authenticity" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg" xlink:show="new" xlink:title="Verify Authenticity" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="68" x="1641.625" y="693.5386">Authenticity</text></a><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="1713.625" y="693.5386">of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="175" x="1527.625" y="706.3433">Update Image in Boot partition</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1523.625" y="719.1479"> </text><text fill="#008000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1480.625" y="693.5386">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1740.625" y="693.5386">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="329" x="1337.125" y="731.7422"/><ellipse cx="1352.625" cy="748.2109" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="1359.125" y="752.8809">Jump to firmware in Boot partition</text><ellipse cx="1352.625" cy="762.1797" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="297" x="1359.125" y="766.8496">This may be recently swapped/updated firmware</text><ellipse cx="1501.625" cy="825.6797" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="1501.625" cy="825.6797" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FF6347" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1723.125" y="731.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1733.125" y="752.8809">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="547.9375" x2="547.9375" y1="226.2539" y2="248.8203"/><polygon fill="#181818" points="543.9375,238.8203,547.9375,248.8203,551.9375,238.8203,547.9375,242.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="547.9375" x2="547.9375" y1="282.7891" y2="302.7891"/><polygon fill="#181818" points="543.9375,292.7891,547.9375,302.7891,551.9375,292.7891,547.9375,296.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="133.5" x2="133.5" y1="562.5313" y2="597.5313"/><polygon fill="#181818" points="129.5,587.5313,133.5,597.5313,137.5,587.5313,133.5,591.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="417" x2="417" y1="892.8828" y2="923.3594"/><polygon fill="#181818" points="413,913.3594,417,923.3594,421,913.3594,417,917.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="417" x2="417" y1="1013.2031" y2="1033.2031"/><polygon fill="#181818" points="413,1023.2031,417,1033.2031,421,1023.2031,417,1027.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="427" x2="417" y1="790.1289" y2="790.1289"/><line style="stroke:#181818;stroke-width:1.0;" x1="417" x2="417" y1="790.1289" y2="844.9453"/><polygon fill="#181818" points="413,834.9453,417,844.9453,421,834.9453,417,838.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="677" x2="687" y1="790.1289" y2="790.1289"/><line style="stroke:#181818;stroke-width:1.0;" x1="687" x2="687" y1="790.1289" y2="844.9453"/><polygon fill="#181818" points="683,834.9453,687,844.9453,691,834.9453,687,838.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="562" x2="552" y1="709.7031" y2="709.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="552" x2="552" y1="709.7031" y2="745.3125"/><polygon fill="#181818" points="548,735.3125,552,745.3125,556,735.3125,552,739.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="791" x2="801" y1="709.7031" y2="709.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="801" x2="801" y1="709.7031" y2="745.3125"/><polygon fill="#181818" points="797,735.3125,801,745.3125,805,735.3125,801,739.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="650.5234" y2="684.0938"/><polygon fill="#181818" points="672.5,674.0938,676.5,684.0938,680.5,674.0938,676.5,678.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020.625" x2="1020.625" y1="778.5156" y2="813.5156"/><polygon fill="#181818" points="1016.625,803.5156,1020.625,813.5156,1024.625,803.5156,1020.625,807.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020.625" x2="1020.625" y1="903.3594" y2="935.4023"/><polygon fill="#181818" points="1016.625,925.4023,1020.625,935.4023,1024.625,925.4023,1020.625,929.4023" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.625" x2="1020.625" y1="708.9375" y2="708.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020.625" x2="1020.625" y1="708.9375" y2="744.5469"/><polygon fill="#181818" points="1016.625,734.5469,1020.625,744.5469,1024.625,734.5469,1020.625,738.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1259.625" x2="1269.625" y1="708.9375" y2="708.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1269.625" x2="1269.625" y1="708.9375" y2="744.5469"/><polygon fill="#181818" points="1265.625,734.5469,1269.625,744.5469,1273.625,734.5469,1269.625,738.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501.625" x2="1501.625" y1="779.6797" y2="814.6797"/><polygon fill="#181818" points="1497.625,804.6797,1501.625,814.6797,1505.625,804.6797,1501.625,808.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1511.625" x2="1501.625" y1="696.1328" y2="696.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="1501.625" x2="1501.625" y1="696.1328" y2="731.7422"/><polygon fill="#181818" points="1497.625,721.7422,1501.625,731.7422,1505.625,721.7422,1501.625,725.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1740.625" x2="1750.625" y1="696.1328" y2="696.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="1750.625" x2="1750.625" y1="696.1328" y2="731.7422"/><polygon fill="#181818" points="1746.625,721.7422,1750.625,731.7422,1754.625,721.7422,1750.625,725.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1205.375" x2="1145.125" y1="585.125" y2="585.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1145.125" x2="1145.125" y1="585.125" y2="683.3281"/><polygon fill="#181818" points="1141.125,673.3281,1145.125,683.3281,1149.125,673.3281,1145.125,677.3281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1145.125" y="632.3472"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1145.125" y="645.1519">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="27" x="1199.125" y="645.1519">New</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="1230.125" y="645.1519">state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1431.375" x2="1626.125" y1="585.125" y2="585.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1626.125" x2="1626.125" y1="585.125" y2="670.5234"/><polygon fill="#181818" points="1622.125,660.5234,1626.125,670.5234,1630.125,660.5234,1626.125,664.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1626.125" y="632.3472">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="1680.125" y="632.3472">Success</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="1736.125" y="632.3472">state</text><line style="stroke:#181818;stroke-width:1.0;" x1="869.5" x2="676.5" y1="504.6992" y2="504.6992"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="504.6992" y2="546.7109"/><polygon fill="#181818" points="672.5,536.7109,676.5,546.7109,680.5,536.7109,676.5,540.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1115.5" x2="1318.375" y1="504.6992" y2="504.6992"/><line style="stroke:#181818;stroke-width:1.0;" x1="1318.375" x2="1318.375" y1="504.6992" y2="546.7109"/><polygon fill="#181818" points="1314.375,536.7109,1318.375,546.7109,1322.375,536.7109,1318.375,540.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.9375" x2="133.5" y1="430.6758" y2="430.6758"/><line style="stroke:#181818;stroke-width:1.0;" x1="133.5" x2="133.5" y1="430.6758" y2="472.6875"/><polygon fill="#181818" points="129.5,462.6875,133.5,472.6875,137.5,462.6875,133.5,466.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658.9375" x2="992.5" y1="430.6758" y2="430.6758"/><line style="stroke:#181818;stroke-width:1.0;" x1="992.5" x2="992.5" y1="430.6758" y2="472.6875"/><polygon fill="#181818" points="988.5,462.6875,992.5,472.6875,996.5,462.6875,992.5,466.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="547.9375" x2="547.9375" y1="378.6641" y2="398.6641"/><polygon fill="#181818" points="543.9375,388.6641,547.9375,398.6641,551.9375,388.6641,547.9375,392.6641" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[76dde8d7108a7526debeba7a330c2416]
@startuml
skinparam backgroundColor #lightgrey
skinparam titlefontsize 50
title MCU update flow

start
note right: Power ON / Board Reset

  :rustBoot Start; 

  :**Open Partitions** 
  
  * Boot 
  * Update ;

#orange:if (
                  **Check** 

* Is Boot in **Testing** state (0x10)?\n) then (<color:green>**True**)


  :               **Trigger Update**
  
  * Swapped firmware was not able to 
      set the **success** state (0x00)
  * set Image state to **Updating** state;
  #plum:Roll back to the Boot firmware;
  kill
else (<color:red>**False**)
  #orange:if (
                    **Check** 
  
* Is Update in **Updating** state (0x70)?\n) then (<color:green>**True**);
    :Begin rustBoot Update
    Open 3 partitions
    
    * Boot
    * Update
    * Swap;
    #orange:if (
  Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of\n Image in Update partition \n) then (<color:green>**True**)
    
      #orange:if (\n                **Prevent rollback** \n                     **Check** 
      
* Is Update image version greater than \n Boot image version? \n) then (<color:green>**True**)
        :* Swap the Update partition with Boot partition
        * Set the update image flag to **Testing** state;
        :* Jump to the updated firmware 
        * validate the firmware functionality
        * Update image state flags erased
        * set the boot image flag to **success** state 
            (0x00);
        stop
      else(<color:red>**False**) 
        #tomato:Panic!;
        kill
      endif
    else(<color:red>**False**)
      #tomato:Panic!;
      kill
    endif
  else (<color:red>**False**)
  <style>
diamond  {
  BackgroundColor orange
}
</style>
    switch(\n                 **Check**\n \n * Is Boot in **New** state (0xFF)?\n * Is Boot in **Success** state (0x00)?\n)
    case (\n* Boot in **New** state)
      #orange:if (\n Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of \n Boot Image in Boot partition\n) then (<color:green>**True**)
        :Jump to the Boot firmware in boot partition;
          :                       **Trigger update** 
          
        * Checks for the update, if available   
        * Sets the Update image state to **Updating** state 
                                    (0x70);
        stop
         note right: Board Reset
        
      else (<color:red>**False**)
        #tomato:Panic!;
        kill
      endif
    case (* Boot in **Success** state)
      #orange:if (\n Verify [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Intigrity_diagram.svg{Verify Integrity} Integrity]] and [[https://raw.githubusercontent.com/UdayakumarHidakal/RustBoot-state-diagrams/main/verify_Authenticity_diagram.svg{Verify Authenticity} Authenticity]] of \n Update Image in Boot partition\n) then (<color:green>**True**)
        :* Jump to firmware in Boot partition
* This may be recently swapped/updated firmware;
        stop
      else (<color:red>**False**)
        #tomato:Panic!;
        kill


legend top right
    | **Value** | **States** |
    | 0xFF  | New State |
    | 0x70  | Updating State |
    | 0x10  | Testing State |
    | 0x00  | Success State |
endlegend
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>