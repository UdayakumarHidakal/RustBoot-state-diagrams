<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="862px" preserveAspectRatio="none" style="width:1340px;height:862px;background:#FFFFFF;" version="1.1" viewBox="0 0 1340 862" width="1340px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="125" x="606.4063" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115" x="611.4063" y="32.9951">rustBoot Flow</text><path d="M496.5,47.2969 L496.5,55.8633 L476.5,59.8633 L496.5,63.8633 L496.5,72.4297 A0,0 0 0 0 496.5,72.4297 L670.5,72.4297 A0,0 0 0 0 670.5,72.4297 L670.5,57.2969 L660.5,47.2969 L496.5,47.2969 A0,0 0 0 0 496.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M660.5,47.2969 L660.5,57.2969 L670.5,57.2969 L660.5,47.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="502.5" y="64.3638">Power ON / Board Reset</text><ellipse cx="466.5" cy="59.8633" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="415" y="92.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="425" y="113.5684">rustBoot Start</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="411" y="146.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="421" y="167.5371">Open Partitions</text><ellipse cx="426.5" cy="176.8359" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="433" y="181.5059">Boot</text><ellipse cx="426.5" cy="190.8047" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="433" y="195.4746">Update</text><polygon fill="#F1F1F1" points="394,251.4106,539,251.4106,551,270.6177,539,289.8247,394,289.8247,382,270.6177,394,251.4106" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="394" y="261.6211">Check</text><ellipse cx="399.5" cy="269.52" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="405" y="274.4258">Boot is in Testing State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="398" y="287.2305">(0x10)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="255" y="229.6094">True i.e. Swapped</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="255" y="242.4141">firmware was not able</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="255.2188"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="259" y="255.2188">to set the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="268.0234"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="263" y="268.0234">success state (0x00)</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="551" y="268.0234">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="234" x="11" y="299.8247"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="21" y="320.9634">Trigger Update</text><ellipse cx="26.5" cy="330.2622" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="33" y="334.9321">set Image state to Updating state</text><rect fill="#FFA500" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="27" y="382.7622"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="37" y="403.9009">Roll back to the Boot firmware</text><polygon fill="#F1F1F1" points="729.1875,299.8247,897.1875,299.8247,909.1875,319.0317,897.1875,338.2388,729.1875,338.2388,717.1875,319.0317,729.1875,299.8247" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="729.1875" y="310.0352">Check</text><ellipse cx="734.6875" cy="317.9341" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="740.1875" y="322.8398">Update is in Updating State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="729.1875" y="335.6445">(0x70)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="691.1875" y="316.4375">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="909.1875" y="316.4375">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="504.5625" y="348.2388"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="514.5625" y="369.3774">Jump to rustBoot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="514.5625" y="383.3462">Open 3 partitions</text><ellipse cx="520.0625" cy="392.645" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="526.5625" y="397.3149">Boot</text><ellipse cx="520.0625" cy="406.6138" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="526.5625" y="411.2837">Update</text><ellipse cx="520.0625" cy="420.5825" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="526.5625" y="425.2524">Swap</text><polygon fill="#F1F1F1" points="541.0625,473.0825,637.0625,473.0825,649.0625,498.6919,637.0625,524.3013,541.0625,524.3013,529.0625,498.6919,541.0625,473.0825" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="541.0625" y="483.293">Verify Integrty</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="541.0625" y="496.0977">and authenticity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="541.0625" y="508.9023">of Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="541.0625" y="521.707">Update partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="503.0625" y="496.0977">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="649.0625" y="496.0977">False</text><polygon fill="#F1F1F1" points="431.3125,534.3013,570.3125,534.3013,582.3125,566.313,570.3125,598.3247,431.3125,598.3247,419.3125,566.313,431.3125,534.3013" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="431.3125" y="544.5117">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="435.3125" y="557.3164">Check</text><ellipse cx="436.8125" cy="565.2153" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="442.3125" y="570.1211">Update Image Version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="435.3125" y="582.9258">greater than</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="435.3125" y="595.7305">Boot Image version</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="393.3125" y="563.7188">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="582.3125" y="563.7188">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="328.3125" y="608.3247"/><ellipse cx="343.8125" cy="624.7935" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="350.3125" y="629.4634">Swap the Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="346.3125" y="643.4321">partition with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="346.3125" y="657.4009">Boot partition</text><ellipse cx="343.8125" cy="666.6997" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="350.3125" y="671.3696">Set the update image</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="346.3125" y="685.3384">flag to Testing state</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="286.8125" y="733.1685"/><ellipse cx="302.3125" cy="749.6372" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="308.8125" y="754.3071">Jump to the updated firmware</text><ellipse cx="302.3125" cy="763.606" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="308.8125" y="768.2759">validate the firmware functionality</text><ellipse cx="302.3125" cy="777.5747" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="213" x="308.8125" y="782.2446">set the Image flag to success state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="312.8125" y="796.2134">(0x00)</text><ellipse cx="409.3125" cy="840.0435" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="409.3125" cy="840.0435" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="564.8125" y="608.3247"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="574.8125" y="629.4634">Panic!</text><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="649.8125" y="534.3013"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="659.8125" y="555.4399">Panic!</text><polygon fill="#F1F1F1" points="947.3125,348.2388,1127.3125,348.2388,1139.3125,367.4458,1127.3125,386.6528,947.3125,386.6528,935.3125,367.4458,947.3125,348.2388" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="947.3125" y="358.4492">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="152" x="951.3125" y="371.2539">* Boot In New State (0xFF)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="951.3125" y="384.0586">* Boot In Success State (0x00)</text><polygon fill="#F1F1F1" points="878.0625,435.0669,986.0625,435.0669,998.0625,460.6763,986.0625,486.2856,878.0625,486.2856,866.0625,460.6763,878.0625,435.0669" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="878.0625" y="445.2773">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="882.0625" y="458.082">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="882.0625" y="470.8867">Boot Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="882.0625" y="483.6914">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="840.0625" y="458.082">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="998.0625" y="458.082">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="789.3125" y="496.2856"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="799.3125" y="517.4243">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="803.3125" y="531.3931">Boot firmware</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="744.8125" y="579.2231"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="754.8125" y="600.3618">Trigger update</text><ellipse cx="760.3125" cy="609.6606" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="766.8125" y="614.3306">Set the Update Image state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="762.8125" y="628.2993">to Updating state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="762.8125" y="642.2681">(0x70)</text><path d="M873.8125,690.0981 L873.8125,698.6646 L853.8125,702.6646 L873.8125,706.6646 L873.8125,715.231 A0,0 0 0 0 873.8125,715.231 L972.8125,715.231 A0,0 0 0 0 972.8125,715.231 L972.8125,700.0981 L962.8125,690.0981 L873.8125,690.0981 A0,0 0 0 0 873.8125,690.0981 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M962.8125,690.0981 L962.8125,700.0981 L972.8125,700.0981 L962.8125,690.0981 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="879.8125" y="707.165">Board Reset</text><ellipse cx="843.8125" cy="702.6646" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="837.6253" x2="849.9997" y1="696.4774" y2="708.8517"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="849.9997" x2="837.6253" y1="696.4774" y2="708.8517"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="992.8125" y="496.2856"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1002.8125" y="517.4243">Panic!</text><polygon fill="#F1F1F1" points="1172.3125,447.8716,1280.3125,447.8716,1292.3125,473.481,1280.3125,499.0903,1172.3125,499.0903,1160.3125,473.481,1172.3125,447.8716" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="1172.3125" y="458.082">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="1176.3125" y="470.8867">and autenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1176.3125" y="483.6914">Update Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1176.3125" y="496.4961">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="1134.3125" y="470.8867">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1292.3125" y="470.8867">False</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1087.8125" y="509.0903"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1097.8125" y="530.229">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1101.8125" y="544.1978">Update firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="1101.8125" y="558.1665">in Boot partition</text><ellipse cx="1150.3125" cy="615.9966" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;fill:none;"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1144.1253" x2="1156.4997" y1="609.8094" y2="622.1838"/><line style="stroke:#222222;stroke-width:2.5;fill:none;" x1="1156.4997" x2="1144.1253" y1="609.8094" y2="622.1838"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1274.8125" y="509.0903"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1284.8125" y="530.229">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="69.8633" y2="92.4297"/><polygon fill="#181818" points="462.5,82.4297,466.5,92.4297,470.5,82.4297,466.5,86.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="126.3984" y2="146.3984"/><polygon fill="#181818" points="462.5,136.3984,466.5,146.3984,470.5,136.3984,466.5,140.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="347.7622" y2="382.7622"/><polygon fill="#181818" points="124,372.7622,128,382.7622,132,372.7622,128,376.7622" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="698.1685" y2="733.1685"/><polygon fill="#181818" points="405.3125,723.1685,409.3125,733.1685,413.3125,723.1685,409.3125,727.1685" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="809.0435" y2="829.0435"/><polygon fill="#181818" points="405.3125,819.0435,409.3125,829.0435,413.3125,819.0435,409.3125,823.0435" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="419.3125" x2="409.3125" y1="566.313" y2="566.313"/><line style="stroke:#181818;stroke-width:1.0;" x1="409.3125" x2="409.3125" y1="566.313" y2="608.3247"/><polygon fill="#181818" points="405.3125,598.3247,409.3125,608.3247,413.3125,598.3247,409.3125,602.3247" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="582.3125" x2="592.3125" y1="566.313" y2="566.313"/><line style="stroke:#181818;stroke-width:1.0;" x1="592.3125" x2="592.3125" y1="566.313" y2="608.3247"/><polygon fill="#181818" points="588.3125,598.3247,592.3125,608.3247,596.3125,598.3247,592.3125,602.3247" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="529.0625" x2="500.8125" y1="498.6919" y2="498.6919"/><line style="stroke:#181818;stroke-width:1.0;" x1="500.8125" x2="500.8125" y1="498.6919" y2="534.3013"/><polygon fill="#181818" points="496.8125,524.3013,500.8125,534.3013,504.8125,524.3013,500.8125,528.3013" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="649.0625" x2="677.3125" y1="498.6919" y2="498.6919"/><line style="stroke:#181818;stroke-width:1.0;" x1="677.3125" x2="677.3125" y1="498.6919" y2="534.3013"/><polygon fill="#181818" points="673.3125,524.3013,677.3125,534.3013,681.3125,524.3013,677.3125,528.3013" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589.0625" x2="589.0625" y1="438.0825" y2="473.0825"/><polygon fill="#181818" points="585.0625,463.0825,589.0625,473.0825,593.0625,463.0825,589.0625,467.0825" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="544.2231" y2="579.2231"/><polygon fill="#181818" points="839.8125,569.2231,843.8125,579.2231,847.8125,569.2231,843.8125,573.2231" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="655.0981" y2="692.6646"/><polygon fill="#181818" points="839.8125,682.6646,843.8125,692.6646,847.8125,682.6646,843.8125,686.6646" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="866.0625" x2="843.8125" y1="460.6763" y2="460.6763"/><line style="stroke:#181818;stroke-width:1.0;" x1="843.8125" x2="843.8125" y1="460.6763" y2="496.2856"/><polygon fill="#181818" points="839.8125,486.2856,843.8125,496.2856,847.8125,486.2856,843.8125,490.2856" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="998.0625" x2="1020.3125" y1="460.6763" y2="460.6763"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020.3125" x2="1020.3125" y1="460.6763" y2="496.2856"/><polygon fill="#181818" points="1016.3125,486.2856,1020.3125,496.2856,1024.3125,486.2856,1020.3125,490.2856" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150.3125" x2="1150.3125" y1="570.9966" y2="605.9966"/><polygon fill="#181818" points="1146.3125,595.9966,1150.3125,605.9966,1154.3125,595.9966,1150.3125,599.9966" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160.3125" x2="1150.3125" y1="473.481" y2="473.481"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150.3125" x2="1150.3125" y1="473.481" y2="509.0903"/><polygon fill="#181818" points="1146.3125,499.0903,1150.3125,509.0903,1154.3125,499.0903,1150.3125,503.0903" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1292.3125" x2="1302.3125" y1="473.481" y2="473.481"/><line style="stroke:#181818;stroke-width:1.0;" x1="1302.3125" x2="1302.3125" y1="473.481" y2="509.0903"/><polygon fill="#181818" points="1298.3125,499.0903,1302.3125,509.0903,1306.3125,499.0903,1302.3125,503.0903" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="935.3125" x2="932.0625" y1="367.4458" y2="367.4458"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.0625" x2="932.0625" y1="367.4458" y2="435.0669"/><polygon fill="#181818" points="928.0625,425.0669,932.0625,435.0669,936.0625,425.0669,932.0625,429.0669" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="932.0625" y="405.0645">* Boot in New state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1139.3125" x2="1226.3125" y1="367.4458" y2="367.4458"/><line style="stroke:#181818;stroke-width:1.0;" x1="1226.3125" x2="1226.3125" y1="367.4458" y2="447.8716"/><polygon fill="#181818" points="1222.3125,437.8716,1226.3125,447.8716,1230.3125,437.8716,1226.3125,441.8716" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1226.3125" y="405.0645">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1230.3125" y="417.8691">Success state</text><line style="stroke:#181818;stroke-width:1.0;" x1="717.1875" x2="589.0625" y1="319.0317" y2="319.0317"/><line style="stroke:#181818;stroke-width:1.0;" x1="589.0625" x2="589.0625" y1="319.0317" y2="348.2388"/><polygon fill="#181818" points="585.0625,338.2388,589.0625,348.2388,593.0625,338.2388,589.0625,342.2388" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="909.1875" x2="1037.3125" y1="319.0317" y2="319.0317"/><line style="stroke:#181818;stroke-width:1.0;" x1="1037.3125" x2="1037.3125" y1="319.0317" y2="348.2388"/><polygon fill="#181818" points="1033.3125,338.2388,1037.3125,348.2388,1041.3125,338.2388,1037.3125,342.2388" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="128" y1="270.6177" y2="270.6177"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="270.6177" y2="299.8247"/><polygon fill="#181818" points="124,289.8247,128,299.8247,132,289.8247,128,293.8247" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="813.1875" y1="270.6177" y2="270.6177"/><line style="stroke:#181818;stroke-width:1.0;" x1="813.1875" x2="813.1875" y1="270.6177" y2="299.8247"/><polygon fill="#181818" points="809.1875,289.8247,813.1875,299.8247,817.1875,289.8247,813.1875,293.8247" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="208.3047" y2="251.4106"/><polygon fill="#181818" points="462.5,241.4106,466.5,251.4106,470.5,241.4106,466.5,245.4106" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[1845873373ec25d80c8ca8e747587c26]
@startuml
title rustBoot Flow




start
note right: Power ON / Board Reset

  :rustBoot Start; 

  :Open Partitions 
  * Boot 
  * Update ;

if (Check 
* Boot is in Testing State \n (0x10)) then (<color:green>True i.e. Swapped \n<color:green>firmware was not able\n <color:green>to set the \n <color:green> success state (0x00))
  :Trigger Update
  * set Image state to Updating state;
  #Orange:Roll back to the Boot firmware;
  kill
else (<color:red>False)
  if (Check 
* Update is in Updating State\n(0x70)) then (<color:green>True);
    :Jump to rustBoot Update
    Open 3 partitions
    * Boot
    * Update
    * Swap;
    if (Verify Integrty \nand authenticity \nof Image in \nUpdate partition) then (<color:green>True)
      if (Prevent rollback \n Check 
* Update Image Version \n greater than \n Boot Image version) then (<color:green>True)
        :* Swap the Update
          partition with
          Boot partition
        * Set the update image
          flag to Testing state;
        :* Jump to the updated firmware 
        * validate the firmware functionality
        * set the Image flag to success state 
            (0x00);
        stop
      else(<color:red>False) 
        #Salmon:Panic!;
        kill
      endif
    else(<color:red>False)
      #Salmon:Panic!;
      kill
    endif
  else (<color:red>False)
    switch(Check \n * Boot In New State (0xFF)\n * Boot In Success State (0x00))
    case (* Boot in New state)
      if (Verify Integrity \n and autenticity of \n Boot Image in \n Boot partition) then (<color:green>True)
        :Jump to the\n Boot firmware;
          :Trigger update 
        * Set the Update Image state
          to Updating state 
          (0x70);
        end
        note right: Board Reset
      else (<color:red>False)
        #Salmon:Panic!;
        kill
      endif
    case (* Boot in \n Success state)
      if (Verify Integrity \n and autenticity of \n Update Image in \n Boot partition) then (<color:green>True)
        :Jump to the \n Update firmware\n in Boot partition;
        end
      else (<color:red>False)
        #Salmon:Panic!;
        kill
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>