<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1048px" preserveAspectRatio="none" style="width:1357px;height:1048px;background:#FFFFFF;" version="1.1" viewBox="0 0 1357 1048" width="1357px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="125" x="614.75" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115" x="619.75" y="32.9951">rustBoot Flow</text><rect fill="#DDDDDD" height="97.4844" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;" width="182" x="1154.5" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1160.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="45" x="1164.5" y="76.292">Value</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1209.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1213.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="1217.5" y="76.292">States</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1271.5" y="76.292"> </text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1164.5" y="92.5889">0xFF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1217.5" y="92.5889">New State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1164.5" y="108.8857">0x70</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1217.5" y="108.8857">Updating State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1164.5" y="125.1826">0x10</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1217.5" y="125.1826">Testing State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1164.5" y="141.4795">0x00</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1217.5" y="141.4795">Success State</text><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="63.2969" y2="63.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="79.5938" y2="79.5938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="95.8906" y2="95.8906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="112.1875" y2="112.1875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="128.4844" y2="128.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1330.5" y1="144.7813" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1160.5" x2="1160.5" y1="63.2969" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1213.5" x2="1213.5" y1="63.2969" y2="144.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1330.5" x2="1330.5" y1="63.2969" y2="144.7813"/><path d="M496.5,161.7813 L496.5,170.3477 L476.5,174.3477 L496.5,178.3477 L496.5,186.9141 A0,0 0 0 0 496.5,186.9141 L670.5,186.9141 A0,0 0 0 0 670.5,186.9141 L670.5,171.7813 L660.5,161.7813 L496.5,161.7813 A0,0 0 0 0 496.5,161.7813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M660.5,161.7813 L660.5,171.7813 L670.5,171.7813 L660.5,161.7813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="502.5" y="178.8481">Power ON / Board Reset</text><ellipse cx="466.5" cy="174.3477" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="415" y="206.9141"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="425" y="228.0527">rustBoot Start</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="411" y="260.8828"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="421" y="282.0215">Open Partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="421" y="295.9902"> </text><ellipse cx="426.5" cy="305.2891" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="433" y="309.959">Boot</text><ellipse cx="426.5" cy="319.2578" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="433" y="323.9277">Update</text><polygon fill="#00FFFF" points="394,371.7578,539,371.7578,551,397.3672,539,422.9766,394,422.9766,382,397.3672,394,371.7578" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="450" y="381.9683">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="394" y="394.7729"> </text><ellipse cx="399.5" cy="402.6719" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="134" x="405" y="407.5776">Boot is in Testing State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="398" y="420.3823">(0x10)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="255" y="356.3589">True i.e. Swapped</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="255" y="369.1636">firmware was not able</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="381.9683"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="259" y="381.9683">to set the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="255" y="394.7729"> </text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="263" y="394.7729">success state (0x00)</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="551" y="394.7729">False</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="234" x="11" y="432.9766"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="21" y="454.1152">Trigger Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="21" y="468.084"> </text><ellipse cx="26.5" cy="477.3828" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="33" y="482.0527">set Image state to Updating state</text><rect fill="#FFA500" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="27" y="529.8828"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="182" x="37" y="551.0215">Roll back to the Boot firmware</text><polygon fill="#00FFFF" points="739.5,432.9766,907.5,432.9766,919.5,458.5859,907.5,484.1953,739.5,484.1953,727.5,458.5859,739.5,432.9766" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="803.5" y="443.187">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8" x="739.5" y="455.9917">  </text><ellipse cx="745" cy="463.8906" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="750.5" y="468.7964">Update is in Updating State</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="739.5" y="481.6011">(0x70)</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="701.5" y="455.9917">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="919.5" y="455.9917">False</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="512.5" y="494.1953"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="522.5" y="515.334">Jump to rustBoot Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="522.5" y="529.3027">Open 3 partitions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="522.5" y="543.2715"> </text><ellipse cx="528" cy="552.5703" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="534.5" y="557.2402">Boot</text><ellipse cx="528" cy="566.5391" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="534.5" y="571.209">Update</text><ellipse cx="528" cy="580.5078" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="534.5" y="585.1777">Swap</text><polygon fill="#00FFFF" points="549,633.0078,645,633.0078,657,658.6172,645,684.2266,549,684.2266,537,658.6172,549,633.0078" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="549" y="643.2183">Verify Integrty</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="549" y="656.0229">and authenticity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="549" y="668.8276">of Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="549" y="681.6323">Update partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="511" y="656.0229">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="657" y="656.0229">False</text><polygon fill="#00FFFF" points="438.5,694.2266,577.5,694.2266,589.5,732.6406,577.5,771.0547,438.5,771.0547,426.5,732.6406,438.5,694.2266" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="462.5" y="704.437">Prevent rollback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="490.5" y="717.2417">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="438.5" y="730.0464">      </text><ellipse cx="444" cy="737.9453" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="449.5" y="742.8511">Update Image Version</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="442.5" y="755.6558">greater than</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="442.5" y="768.4604">Boot Image version</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="400.5" y="730.0464">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="589.5" y="730.0464">False</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="334" y="781.0547"/><ellipse cx="349.5" cy="797.5234" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="356" y="802.1934">Swap the Update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="352" y="816.1621">partition with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="352" y="830.1309">Boot partition</text><ellipse cx="349.5" cy="839.4297" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="356" y="844.0996">Set the update image</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="352" y="858.0684">flag to Testing state</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="277" x="276.5" y="905.8984"/><ellipse cx="292" cy="922.3672" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="298.5" y="927.0371">Jump to the updated firmware</text><ellipse cx="292" cy="936.3359" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="298.5" y="941.0059">validate the firmware functionality</text><ellipse cx="292" cy="950.3047" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="199" x="298.5" y="954.9746">Update Image state flags erased</text><ellipse cx="292" cy="964.2734" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="245" x="298.5" y="968.9434">set the boot Image flag to success state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="302.5" y="982.9121">(0x00)</text><ellipse cx="415" cy="1026.7422" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="415" cy="1026.7422" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="573.5" y="781.0547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="583.5" y="802.1934">Panic!</text><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="658.5" y="694.2266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="668.5" y="715.3652">Panic!</text><polygon fill="#F1F1F1" points="960,494.1953,1140,494.1953,1152,519.8047,1140,545.4141,960,545.4141,948,519.8047,960,494.1953" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="1028" y="504.4058">Check</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="960" y="517.2104"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="152" x="964" y="530.0151">* Boot In New State (0xFF)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="964" y="542.8198">* Boot In Success State (0x00)</text><polygon fill="#00FFFF" points="883.75,593.8281,998.75,593.8281,1010.75,619.4375,998.75,645.0469,883.75,645.0469,871.75,619.4375,883.75,593.8281" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="883.75" y="604.0386">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="887.75" y="616.8433">and authenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="887.75" y="629.6479">Boot Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="887.75" y="642.4526">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="845.75" y="616.8433">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1010.75" y="616.8433">False</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="798" y="655.0469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="808" y="676.1855">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="812" y="690.1543">Boot firmware</text><rect fill="#F1F1F1" height="89.8438" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="753.5" y="737.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="763.5" y="759.123">Trigger update</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="763.5" y="773.0918">  </text><ellipse cx="769" cy="782.3906" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="775.5" y="787.0605">Set the Update Image state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="771.5" y="801.0293">to Updating state</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="771.5" y="814.998">(0x70)</text><path d="M883.5,862.8281 L883.5,871.3945 L863.5,875.3945 L883.5,879.3945 L883.5,887.9609 A0,0 0 0 0 883.5,887.9609 L982.5,887.9609 A0,0 0 0 0 982.5,887.9609 L982.5,872.8281 L972.5,862.8281 L883.5,862.8281 A0,0 0 0 0 883.5,862.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M972.5,862.8281 L972.5,872.8281 L982.5,872.8281 L972.5,862.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="889.5" y="879.895">Board Reset</text><ellipse cx="852.5" cy="875.3945" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="852.5" cy="875.3945" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1002.5" y="655.0469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1012.5" y="676.1855">Panic!</text><polygon fill="#00FFFF" points="1182,606.6328,1297,606.6328,1309,632.2422,1297,657.8516,1182,657.8516,1170,632.2422,1182,606.6328" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="1182" y="616.8433">Verify Integrity</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="1186" y="629.6479">and authenticity of</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1186" y="642.4526">Update Image in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1186" y="655.2573">Boot partition</text><text fill="#008000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="1144" y="629.6479">True</text><text fill="#FF0000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1309" y="629.6479">False</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1097.5" y="667.8516"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1107.5" y="688.9902">Jump to the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1111.5" y="702.959">Update firmware</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="1111.5" y="716.9277">in Boot partition</text><ellipse cx="1160" cy="775.7578" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="1160" cy="775.7578" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#FA8072" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1291.5" y="667.8516"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1301.5" y="688.9902">Panic!</text><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="184.3477" y2="206.9141"/><polygon fill="#181818" points="462.5,196.9141,466.5,206.9141,470.5,196.9141,466.5,200.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="240.8828" y2="260.8828"/><polygon fill="#181818" points="462.5,250.8828,466.5,260.8828,470.5,250.8828,466.5,254.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="494.8828" y2="529.8828"/><polygon fill="#181818" points="124,519.8828,128,529.8828,132,519.8828,128,523.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="870.8984" y2="905.8984"/><polygon fill="#181818" points="411,895.8984,415,905.8984,419,895.8984,415,899.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="995.7422" y2="1015.7422"/><polygon fill="#181818" points="411,1005.7422,415,1015.7422,419,1005.7422,415,1009.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="426.5" x2="415" y1="732.6406" y2="732.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="732.6406" y2="781.0547"/><polygon fill="#181818" points="411,771.0547,415,781.0547,419,771.0547,415,775.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="589.5" x2="601" y1="732.6406" y2="732.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="601" x2="601" y1="732.6406" y2="781.0547"/><polygon fill="#181818" points="597,771.0547,601,781.0547,605,771.0547,601,775.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="537" x2="508" y1="658.6172" y2="658.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="508" x2="508" y1="658.6172" y2="694.2266"/><polygon fill="#181818" points="504,684.2266,508,694.2266,512,684.2266,508,688.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="657" x2="686" y1="658.6172" y2="658.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="686" x2="686" y1="658.6172" y2="694.2266"/><polygon fill="#181818" points="682,684.2266,686,694.2266,690,684.2266,686,688.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="597" x2="597" y1="598.0078" y2="633.0078"/><polygon fill="#181818" points="593,623.0078,597,633.0078,601,623.0078,597,627.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="852.5" x2="852.5" y1="702.9844" y2="737.9844"/><polygon fill="#181818" points="848.5,727.9844,852.5,737.9844,856.5,727.9844,852.5,731.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="852.5" x2="852.5" y1="827.8281" y2="864.3945"/><polygon fill="#181818" points="848.5,854.3945,852.5,864.3945,856.5,854.3945,852.5,858.3945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="871.75" x2="852.5" y1="619.4375" y2="619.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="852.5" x2="852.5" y1="619.4375" y2="655.0469"/><polygon fill="#181818" points="848.5,645.0469,852.5,655.0469,856.5,645.0469,852.5,649.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1010.75" x2="1030" y1="619.4375" y2="619.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030" x2="1030" y1="619.4375" y2="655.0469"/><polygon fill="#181818" points="1026,645.0469,1030,655.0469,1034,645.0469,1030,649.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="1160" y1="729.7578" y2="764.7578"/><polygon fill="#181818" points="1156,754.7578,1160,764.7578,1164,754.7578,1160,758.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1170" x2="1160" y1="632.2422" y2="632.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="1160" y1="632.2422" y2="667.8516"/><polygon fill="#181818" points="1156,657.8516,1160,667.8516,1164,657.8516,1160,661.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1309" x2="1319" y1="632.2422" y2="632.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="1319" x2="1319" y1="632.2422" y2="667.8516"/><polygon fill="#181818" points="1315,657.8516,1319,667.8516,1323,657.8516,1319,661.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="948" x2="941.25" y1="519.8047" y2="519.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="941.25" x2="941.25" y1="519.8047" y2="593.8281"/><polygon fill="#181818" points="937.25,583.8281,941.25,593.8281,945.25,583.8281,941.25,587.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="941.25" y="560.6245">* Boot in New state</text><line style="stroke:#181818;stroke-width:1.0;" x1="1152" x2="1239.5" y1="519.8047" y2="519.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="1239.5" x2="1239.5" y1="519.8047" y2="606.6328"/><polygon fill="#181818" points="1235.5,596.6328,1239.5,606.6328,1243.5,596.6328,1239.5,600.6328" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1239.5" y="560.6245">* Boot in</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1243.5" y="573.4292">Success state</text><line style="stroke:#181818;stroke-width:1.0;" x1="727.5" x2="597" y1="458.5859" y2="458.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="597" x2="597" y1="458.5859" y2="494.1953"/><polygon fill="#181818" points="593,484.1953,597,494.1953,601,484.1953,597,488.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="919.5" x2="1050" y1="458.5859" y2="458.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="1050" x2="1050" y1="458.5859" y2="494.1953"/><polygon fill="#181818" points="1046,484.1953,1050,494.1953,1054,484.1953,1050,488.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="128" y1="397.3672" y2="397.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="397.3672" y2="432.9766"/><polygon fill="#181818" points="124,422.9766,128,432.9766,132,422.9766,128,426.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="823.5" y1="397.3672" y2="397.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="823.5" x2="823.5" y1="397.3672" y2="432.9766"/><polygon fill="#181818" points="819.5,422.9766,823.5,432.9766,827.5,422.9766,823.5,426.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="466.5" x2="466.5" y1="336.7578" y2="371.7578"/><polygon fill="#181818" points="462.5,361.7578,466.5,371.7578,470.5,361.7578,466.5,365.7578" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[9b1dac3cf74b362979d2bba212ccb27d]
@startuml
title rustBoot Flow

start
note right: Power ON / Board Reset

  :rustBoot Start; 

  :Open Partitions 
  
  * Boot 
  * Update ;

#aqua:if (              Check 

* Boot is in Testing State \n (0x10)) then (<color:green>True i.e. Swapped \n<color:green>firmware was not able\n <color:green>to set the \n <color:green> success state (0x00))
  :Trigger Update
  
  * set Image state to Updating state;
  #Orange:Roll back to the Boot firmware;
  kill
else (<color:red>False)
  #aqua:if (                Check 
  
* Update is in Updating State\n(0x70)) then (<color:green>True);
    :Jump to rustBoot Update
    Open 3 partitions
    
    * Boot
    * Update
    * Swap;
    #aqua:if (Verify Integrty \nand authenticity \nof Image in \nUpdate partition) then (<color:green>True)
      #aqua:if (      Prevent rollback \n             Check 
      
* Update Image Version \n greater than \n Boot Image version) then (<color:green>True)
        :* Swap the Update
          partition with
          Boot partition
        * Set the update image
          flag to Testing state;
        :* Jump to the updated firmware 
        * validate the firmware functionality
        * Update Image state flags erased
        * set the boot Image flag to success state 
            (0x00);
        stop
      else(<color:red>False) 
        #Salmon:Panic!;
        kill
      endif
    else(<color:red>False)
      #Salmon:Panic!;
      kill
    endif
  else (<color:red>False)
    switch(                 Check \n\n * Boot In New State (0xFF)\n * Boot In Success State (0x00))
    case (* Boot in New state)
      #aqua:if (Verify Integrity \n and authenticity of \n Boot Image in \n Boot partition) then (<color:green>True)
        :Jump to the\n Boot firmware;
          :Trigger update 
          
        * Set the Update Image state
          to Updating state 
          (0x70);
        stop
         note right: Board Reset
        
      else (<color:red>False)
        #Salmon:Panic!;
        kill
      endif
    case (* Boot in \n Success state)
      #aqua:if (Verify Integrity \n and authenticity of \n Update Image in \n Boot partition) then (<color:green>True)
        :Jump to the \n Update firmware\n in Boot partition;
        stop
      else (<color:red>False)
        #Salmon:Panic!;
        kill


legend top right
    | **Value** | **States** |
    | 0xFF  | New State |
    | 0x70  | Updating State |
    | 0x10  | Testing State |
    | 0x00  | Success State |
endlegend
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>